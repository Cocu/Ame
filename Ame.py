globals().__setitem__('c',lambda x,y:globals().__setitem__(x,y))or c('sys',__import__('sys'))or c('os',__import__('os'))or sys.setrecursionlimit(10000)or c('u',"Usage: Ame.py FILE [DEBUG]")or c('DebugMode',0)or c('n',lambda:g(("""\n#  WM:{WM}\n# LTM:{LTM}\n# ptr:{ptr} ptr_tmp:{len_ptr_tmp}:{ptr_tmp} depth:{source_depth}\n# tmp:{tmp} sourcelength:{len_sourcelist}\n""".format(WM=WM,LTM=LTM,tmp=tmp,len_sourcelist=len(sourcelist),sourcelist=sourcelist,ptr=ptr,len_ptr_tmp=len(ptr_tmp),source_depth=source_depth,ptr_tmp=ptr_tmp))if DebugMode else''))or c('r','')or c('sourcelist',[])or c('f','')or c('WM',[])or c('LTM',[])or c('ptr_tmp',[])or c('source_depth',0)or c('ptr',0)or c('tmp',0)or c('d',lambda y:c('tmp',y))or c('e',lambda x:c(x,globals()[x][1:]))or c('j',lambda x:c(x,[globals()[x][0]]+globals()[x][2:]))or c('g',lambda x:sys.stdout.write(x)and 0)or c('SyntaxError',lambda x:(g("SyntaxError:"+"\n".join([str(y)for y in[x,r,sourcelist]])+'\n')or sys.exit()))or c('q',lambda x,y=0:q(x[1:],y*3+{'/':0,'|':1,'.':2}[x[0]])if x else y)or c('s',lambda x,y=[]:s(x//243,y+[x%243]) if x else y)or(len(sys.argv)==1 and(sys.exit(u)))or c('f',sys.argv[1])or((lambda:os.path.exists(f)or sys.exit("Not such file: " + f))()and(lambda:os.access(f,os.R_OK)or sys.exit("Can't read this file: "+f+"\nMaybe permission"))()and c('DebugMode',1 if(len(sys.argv)==3 and sys.argv[2]=='DEBUG')else 0)or c('r',''.join(filter(lambda x:x in['/','|','.','!'],open(f).read())))or g(('##r: '+r+'\n')if DebugMode else''))and 0 or c('wordianing',lambda:(lambda:(((c('sourcelist',sourcelist+[r[:3]])or c('r',r[3:]))if len(r)-2>0 else(SyntaxError()))if r[0]in'.!'else(((c('sourcelist',sourcelist+[r[:r.index('!')+1]])or c('r',r[r.index('!')+1:]))if '!'in r else(SyntaxError()))if r[0]in'/'else(SyntaxError())))if r else True)()or wordianing())or((wordianing()and 0)or g(('##r: '+r+'\n##sourcelist: '+str(sourcelist)+'\n')if DebugMode else'')or len(list(filter(lambda x:x in['!/.','!|.'],sourcelist)))-sourcelist.count('...')and SyntaxError('depth error:check "!/.", "!|." or "..."')or c('dic_cmd',{  './/':(lambda:c('WM',[tmp]+WM)or d(0)),'.|/':(lambda:d(WM[0])or e('WM')),'../':(lambda:d(WM[1])or j('WM')),'./|':(lambda:c('LTM',[tmp]+LTM)),'.||':(lambda:d(LTM[0])or e('LTM')),'..|':(lambda:d(LTM[1])or j('LTM')),'./.':(lambda:d(WM[0])),'.|.':(lambda:d(LTM[0])),'...':(lambda:c('source_depth',source_depth-1) or(c('ptr',ptr_tmp[0][0]-1)or c('ptr_tmp',ptr_tmp[1:])if ptr_tmp[0][1]else c('ptr_tmp',ptr_tmp[1:]))),'!//':(lambda:d(WM[1]+WM[0])),'!|/':(lambda:d(WM[1]-WM[0])),'!./':(lambda:d(WM[1]*WM[0])),'!/|':(lambda:d(WM[1]//WM[0])),'!||':(lambda:d(WM[1]%WM[0])),'!.|':(lambda:d(1 if WM[1]<WM[0]else 0)),'!/.':(lambda:c('source_depth',source_depth+1)or(None if WM[0]else c('ptr_tmp',[(ptr,0)]+ptr_tmp))),'!|.':(lambda:c('source_depth',source_depth+1)or(c('ptr_tmp',[(ptr,1)]+ptr_tmp)if WM[0]else None)),'!..':(lambda:(g((lambda y:(''.join([chr(x)for x in s(y)]))if sys.version_info[0]-3 else(str(bytes(s(y)),"ascii")))(WM[0]))or e('WM')))}))or n()or c('running',lambda:(g(('========='+sourcelist[ptr])if DebugMode else'')or(lambda y:(lambda x:c('source_depth',source_depth+x[y])if y in x else None)({'!/.':1,'!|.':1,'...':-1})if len(ptr_tmp)-source_depth else((lambda x:d(q(x[1:-1][::-1])))(y)if y[0]in'/'else dic_cmd[y]()))(sourcelist[ptr])or c('ptr',ptr+1)or n()or running())if ptr<len(sourcelist)else True)or running()
